<!DOCTYPE html>
<html lang="en">
<head>
    <!-- SEO & Metadata -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="BioNova – Empowering sustainable community development through innovative, evidence-based solutions for global resilience." />
    <meta name="keywords" content="sustainable development, NGO, community empowerment, global impact, BioNova, nonprofit" />
    <meta name="author" content="BioNova International" />
    <meta name="theme-color" content="#f97316" />
    <meta property="og:title" content="BioNova | Sustainable Community Development" />
    <meta property="og:description" content="Join us in building resilient futures through local partnerships and global expertise." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bionova.org" />
    <meta property="og:image" content="/content/images/og-impact.jpg" />
    <meta name="twitter:card" content="summary_large_image" />

    <title>BioNova | Sustainable Community Development</title>

    <!-- Fonts: Inter for body, Playfair for headings -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@700;800;900&display=swap" rel="stylesheet" />

    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />

    <style>
        :root {
            /* Colors: Updated — primary is now ORANGE */
            --color-primary: #f97316;            /* Orange (was #0d9488 green) */
            --color-primary-dark: #ea580c;       /* Darker orange (was #0a6c64) */
            --color-accent: #f97316;
            --color-accent-dark: #c2410c;        /* Deeper orange for hover */
            --color-text: #1e293b;
            --color-text-light: #64748b;
            --color-text-inverse: #f8fafc;
            --color-bg: #ffffff;
            --color-bg-alt: #f8fafc;
            --color-border: #e2e8f0;
            --color-muted: #94a3b8;
            --color-highlight: #fef3c7;

            /* Typography */
            --font-base: 'Inter', system-ui, sans-serif;
            --font-display: 'Playfair Display', Georgia, serif;
            --font-size-xs: clamp(0.75rem, 0.6rem + 0.5vw, 0.875rem);
            --font-size-sm: clamp(0.875rem, 0.75rem + 0.4vw, 1rem);
            --font-size-base: clamp(1rem, 0.9rem + 0.3vw, 1.125rem);
            --font-size-lg: clamp(1.125rem, 1rem + 0.4vw, 1.25rem);
            --font-size-xl: clamp(1.25rem, 1.125rem + 0.4vw, 1.5rem);
            --font-size-2xl: clamp(1.5rem, 1.25rem + 0.8vw, 1.875rem);
            --font-size-3xl: clamp(1.875rem, 1.5rem + 1.2vw, 2.25rem);
            --font-size-4xl: clamp(2.25rem, 1.875rem + 1.2vw, 2.75rem);
            --font-size-5xl: clamp(3rem, 2.5rem + 1.5vw, 3.75rem);
            --font-size-6xl: clamp(3.75rem, 3rem + 2.25vw, 4.5rem);

            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            --space-24: 6rem;

            /* Radius & Shadows */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            --radius-full: 9999px;

            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04);

            /* Transitions */
            --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);

            /* Layout */
            --container-max: 1280px;
            --header-height: 80px;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg: #0f172a;
                --color-bg-alt: #1e293b;
                --color-text: #f1f5f9;
                --color-text-light: #cbd5e1;
                --color-border: #334155;
            }
        }

        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            font-size: 100%;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: var(--font-base);
            font-size: var(--font-size-base);
            line-height: 1.75;
            color: var(--color-text);
            background-color: var(--color-bg);
            overflow-x: hidden;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        img, picture, video, canvas, svg {
            display: block;
            max-width: 100%;
            height: auto;
        }

        a {
            color: inherit;
            text-decoration: none;
            transition: var(--transition-base);
        }

        button {
            font-family: inherit;
            cursor: pointer;
            border: none;
            background: none;
            transition: var(--transition-base);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-display);
            font-weight: 700;
            line-height: 1.15;
            letter-spacing: -0.025em;
            margin-bottom: var(--space-4);
        }

        p {
            margin-bottom: var(--space-5);
            color: var(--color-text-light);
        }

        *:focus-visible {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
            border-radius: var(--radius-sm);
        }

        .container {
            width: min(100%, var(--container-max));
            margin: 0 auto;
            padding: 0 var(--space-6);
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            white-space: nowrap;
            border: 0;
        }

        .text-center { text-align: center; }
        .text-left { text-align: left; }

        .grid {
            display: grid;
            gap: var(--space-8);
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: var(--header-height);
            background: var(--color-bg);
            border-bottom: 1px solid var(--color-border);
            z-index: 1000;
            transition: var(--transition-base);
            box-shadow: var(--shadow-sm);
        }

        .header.scrolled {
            box-shadow: var(--shadow-lg);
        }

        .nav {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            gap: var(--space-10);
        }

        .nav a {
            position: relative;
            font-weight: 600;
            font-size: var(--font-size-sm);
            color: var(--color-text);
            padding: var(--space-3) 0;
        }

        .nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
            transition: var(--transition-base);
            transform: translateX(-50%);
        }

        .nav a:hover::after,
        .nav a:focus::after {
            width: 100%;
        }

        .nav a:hover,
        .nav a:focus {
            color: var(--color-primary);
        }

        /* Hero */
        .hero {
            margin-top: var(--header-height);
            height: 100vh;
            min-height: 700px;
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('/content/images/hero-sustainable.jpg') center/cover no-repeat fixed;
            color: var(--color-text-inverse);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 20% 80%, rgba(249, 115, 22, 0.2), transparent 50%);
            z-index: 0;
        }

        .hero-content {
            max-width: 900px;
            padding: 0 var(--space-6);
            position: relative;
            z-index: 1;
            animation: fadeInUp var(--transition-slow) ease-out;
        }

        .hero h1 {
            font-size: var(--font-size-6xl);
            margin-bottom: var(--space-6);
            line-height: 1.1;
            letter-spacing: -0.03em;
        }

        .hero p {
            font-size: var(--font-size-xl);
            max-width: 700px;
            margin: 0 auto var(--space-8);
            opacity: 0.95;
            color: var(--color-text-inverse);
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4) var(--space-8);
            background: var(--color-primary);
            color: white;
            font-weight: 600;
            font-size: var(--font-size-lg);
            border-radius: var(--radius-full);
            box-shadow: var(--shadow-md);
            transition: var(--transition-base);
        }

        .cta-button:hover {
            background: var(--color-primary-dark);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        /* Section Base */
        .section {
            padding: var(--space-20) 0;
        }

        .section.alt-bg {
            background: var(--color-bg-alt);
        }

        .section-header {
            text-align: center;
            max-width: 800px;
            margin: 0 auto var(--space-12);
        }

        .section-header h2 {
            font-size: var(--font-size-5xl);
            color: var(--color-text);
            margin-bottom: var(--space-3);
        }

        .section-header p {
            font-size: var(--font-size-lg);
            color: var(--color-text-light);
            max-width: 600px;
            margin: 0 auto;
        }

        .section-header::after {
            content: '';
            display: block;
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
            margin: var(--space-6) auto 0;
            border-radius: 2px;
        }

        .about-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-12);
            align-items: center;
        }

        .about-text p {
            font-size: var(--font-size-lg);
            line-height: 1.8;
            margin-bottom: var(--space-6);
        }

        .learn-more-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4) var(--space-8);
            background: var(--color-accent);
            color: white;
            font-weight: 600;
            border-radius: var(--radius-full);
            transition: var(--transition-base);
        }

        .learn-more-btn:hover {
            background: var(--color-accent-dark);
            transform: translateY(-2px);
        }

        .about-image {
            border-radius: var(--radius-2xl);
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            transition: var(--transition-slow);
            aspect-ratio: 4/3;
        }

        .about-image:hover {
            transform: scale(1.02);
        }

        .about-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }

        /* Articles */
        .articles-preview {
            display: grid;
            gap: var(--space-8);
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        }

        .article-card {
            background: var(--color-bg);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: var(--transition-base);
            border: 1px solid var(--color-border);
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .article-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
            transform: scaleX(0);
            transition: var(--transition-base);
            z-index: 1;
        }

        .article-card:hover::before {
            transform: scaleX(1);
        }

        .article-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: transparent;
        }

        .card-image {
            width: 100%;
            height: 240px;
            overflow: hidden;
            background-color: var(--color-bg-alt);
        }

        .card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform var(--transition-slow);
        }

        .article-card:hover .card-image img {
            transform: scale(1.08);
        }

        .card-content {
            padding: var(--space-6);
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .card-content h3 {
            font-size: var(--font-size-xl);
            margin-bottom: var(--space-3);
            color: var(--color-text);
            line-height: 1.3;
        }

        .card-content p {
            color: var(--color-text-light);
            margin-bottom: var(--space-5);
            flex-grow: 1;
            line-height: 1.6;
        }

        .read-more-btn {
            background: var(--color-primary);
            color: white;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-weight: 600;
            align-self: flex-start;
            transition: var(--transition-base);
            font-size: var(--font-size-sm);
        }

        .read-more-btn:hover {
            background: var(--color-primary-dark);
            transform: translateX(4px);
        }

        /* Team */
        .team-preview {
            display: grid;
            gap: var(--space-8);
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        }

        .team-card {
            background: var(--color-bg);
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: var(--transition-base);
            border: 1px solid var(--color-border);
            display: flex;
            flex-direction: column;
        }

        .team-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--color-primary);
        }

        .team-card img {
            width: 100%;
            height: 280px;
            object-fit: cover;
            background-color: var(--color-bg-alt);
        }

        .card-content-team {
            padding: var(--space-6);
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
            flex-grow: 1;
        }

        .card-content-team h3 {
            font-size: var(--font-size-xl);
            color: var(--color-text);
            margin-bottom: 0;
        }

        .card-content-team p {
            margin-bottom: 0;
            line-height: 1.6;
        }

        .card-content-team p strong {
            color: var(--color-primary);
            font-weight: 600;
            font-size: var(--font-size-base);
        }

        .card-content-team button {
            margin-top: auto;
            background: var(--color-accent);
            color: white;
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: var(--font-size-sm);
        }

        .card-content-team button:hover {
            background: var(--color-accent-dark);
            transform: translateX(4px);
        }

        /* Stats */
        .stats-section {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
            color: var(--color-text-inverse);
            padding: var(--space-24) 0;
            text-align: center;
            position: relative;
        }

        .stats-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255,255,255,0.05) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(255,255,255,0.05) 0%, transparent 50%);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-12);
            max-width: 1100px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .stat-item h3 {
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 900;
            margin-bottom: var(--space-3);
            line-height: 1;
            color: var(--color-text-inverse);
        }

        .stat-item p {
            font-size: var(--font-size-lg);
            opacity: 0.95;
            color: var(--color-text-inverse);
        }

        /* View All */
        .view-all-container {
            text-align: center;
            margin-top: var(--space-12);
        }

        .view-all-btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-4) var(--space-8);
            background: transparent;
            color: var(--color-primary);
            border: 2px solid var(--color-primary);
            border-radius: var(--radius-full);
            font-weight: 600;
            transition: var(--transition-base);
        }

        .view-all-btn:hover {
            background: var(--color-primary);
            color: var(--color-text-inverse);
            transform: translateY(-2px);
        }

        /* ✅ FIXED FOOTER */
        footer {
            background: var(--color-primary-dark);
            color: var(--color-text-inverse);
            text-align: center;
            padding: var(--space-12) 0;
            font-size: var(--font-size-sm);
        }

        footer p {
            color: var(--color-text-inverse);
            opacity: 0.9;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: var(--space-12);
            color: var(--color-muted);
        }

        .spinner {
            width: 48px;
            height: 48px;
            border: 4px solid rgba(249, 115, 22, 0.2);
            border-top: 4px solid var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-4);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.8s ease-out forwards;
        }

        .fade-in:nth-child(1) { animation-delay: 0.1s; }
        .fade-in:nth-child(2) { animation-delay: 0.2s; }
        .fade-in:nth-child(3) { animation-delay: 0.3s; }

        /* Responsive */
        @media (max-width: 1024px) {
            .about-content { 
                grid-template-columns: 1fr; 
                text-align: center; 
                gap: var(--space-8); 
            }
        }

        @media (max-width: 768px) {
            .hero { 
                height: 90vh; 
                background-attachment: scroll; 
            }
            .hero h1 { 
                font-size: var(--font-size-4xl); 
            }
            .section { 
                padding: var(--space-12) 0; 
            }
            .nav { 
                gap: var(--space-6); 
                flex-wrap: wrap; 
                justify-content: center; 
            }
            .stats-grid { 
                grid-template-columns: repeat(2, 1fr); 
            }
            .card-image {
                height: 200px;
            }
            .team-card img {
                height: 240px;
            }
        }

        @media (max-width: 480px) {
            .stats-grid { 
                grid-template-columns: 1fr; 
            }
            .hero h1 { 
                font-size: var(--font-size-3xl); 
            }
            .nav {
                gap: var(--space-4);
                padding: 0 var(--space-4);
            }
            .nav a {
                font-size: var(--font-size-xs);
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link -->
    <a href="#main-content" class="sr-only">Skip to main content</a>

    <!-- Header -->
    <header class="header" id="header">
        <nav class="nav" aria-label="Main navigation">
            <a href="index.html">Home</a>
            <a href="articles.html">Articles</a>
            <a href="team.html">Team</a>
            <a href="services.html">Services</a>
            <a href="contact.html">Contact</a>
        </nav>
    </header>

    <main id="main-content">
        <!-- Hero -->
        <section class="hero" aria-labelledby="hero-heading">
            <div class="hero-content">
                <h1 id="hero-heading">Sustainable Solutions for Global Challenges</h1>
                <p>Empowering communities through innovative development programs and strategic partnerships</p>
                <button class="cta-button" onclick="window.location.href='contact.html'">Join Our Mission</button>
            </div>
        </section>

        <!-- About -->
        <section class="section" aria-labelledby="about-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="about-heading">Our Commitment to Sustainable Change</h2>
                    <p>Building resilient communities through evidence-based approaches and collaborative partnerships</p>
                </header>
                <div class="about-content">
                    <div class="about-text">
                        <p>BioNova is an international non-governmental organization dedicated to creating lasting, sustainable change in communities worldwide. Our evidence-based approach combines local knowledge with global expertise to address the most pressing challenges facing vulnerable populations.</p>
                        <p>Our mission focuses on empowering communities through capacity building, education, healthcare access, and economic development initiatives. We prioritize local leadership and participatory approaches to ensure our programs are culturally appropriate and sustainable in the long term.</p>
                        <p>Through strategic partnerships with local organizations, government agencies, and international stakeholders, we've successfully implemented programs that have transformed lives across multiple continents while maintaining the highest standards of accountability and transparency.</p>
                        <a href="#" class="learn-more-btn">Explore Our Impact <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="about-image fade-in">
                        <img src="/content/images/teamBio.jpeg" alt="BioNova team collaborating on community development project" loading="lazy">
                    </div>
                </div>
            </div>
        </section>

        <!-- Articles -->
        <section class="section alt-bg" aria-labelledby="articles-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="articles-heading">Insights & Impact Stories</h2>
                    <p>Research findings, program updates, and stories of transformation from our global initiatives</p>
                </header>
                <div id="articles-container" class="articles-preview">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading articles...</p>
                    </div>
                </div>
                <div class="view-all-container">
                    <a href="articles.html" class="view-all-btn">View All Publications <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </section>

 

        <!-- Team -->
        <section class="section alt-bg" aria-labelledby="team-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="team-heading">Our Leadership & Experts</h2>
                    <p>Dedicated professionals driving sustainable change across our global operations</p>
                </header>
                <div id="team-container" class="team-preview">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading team...</p>
                    </div>
                </div>
                <div class="view-all-container">
                    <a href="team.html" class="view-all-btn">Meet Our Full Team <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 BioNova. All rights reserved. Committed to transparency and accountability.</p>
        </div>
    </footer>

    <!-- Script unchanged -->
    <script>
        // Utility function for parsing YAML frontmatter
        function parseYAML(yamlStr) {
            const result = {};
            const lines = yamlStr.trim().split('\n');
            for (const line of lines) {
                const [key, ...valueParts] = line.split(':');
                const trimmedKey = key.trim();
                let value = valueParts.join(':').trim();
                if (value.startsWith('"') && value.endsWith('"')) {
                    value = value.slice(1, -1);
                } else if (value.startsWith("'") && value.endsWith("'")) {
                    value = value.slice(1, -1);
                } else if (value.startsWith('[') && value.endsWith(']')) {
                    value = value.slice(1, -1).split(',').map(v => v.trim().replace(/"/g, '').replace(/'/g, ''));
                }
                result[trimmedKey] = value;
            }
            return result;
        }

        // Function to convert markdown to HTML (simplified)
        function simpleMarkdownToHTML(md) {
            let html = md;
            html = html.replace(/^(\s*)## (.+)$/gm, '$1<h2>$2</h2>');
            html = html.replace(/^(\s*)# (.+)$/gm, '$1<h1>$2</h1>');
            html = html.replace(/^(\s*)### (.+)$/gm, '$1<h3>$2</h3>');
            html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/\*(.+?)\*/g, '<em>$1</em>');
            html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
            html = html.replace(/^- (.+)$/gm, '<li>$1</li>');
            html = html.replace(/(<li>.+<\/li>)+/g, '<ul>$&</ul>');
            html = html.replace(/\n/g, '<br>');
            const paragraphs = html.split('<br><br>');
            html = paragraphs.map(p => `<p>${p}</p>`).join('');
            html = html.replace(/<br><br>/g, '<br>');
            return html;
        }

        // Main function to load content
        async function loadIndexContent() {
            try {
                const indexResponse = await fetch('/content/index.json');
                if (!indexResponse.ok) {
                    throw new Error(`HTTP error! status: ${indexResponse.status}`);
                }
                const indexData = await indexResponse.json();

                // Load latest 3 articles
                const articleFiles = indexData.articles.slice(0, 3);
                const articlePromises = articleFiles.map(file =>
                    fetch(`/content/${file}`)
                        .then(r => {
                            if (!r.ok) throw new Error(`Failed to load article: ${file}`);
                            return r.text();
                        })
                        .catch(err => {
                            console.error(`Error loading article ${file}:`, err);
                            return null;
                        })
                );

                const articleTexts = await Promise.all(articlePromises);
                const validArticleTexts = articleTexts.filter(text => text !== null);
                const articleCards = [];
                for (let i = 0; i < validArticleTexts.length; i++) {
                    const text = validArticleTexts[i];
                    const parts = text.split('---');
                    if (parts.length >= 3) {
                        const frontmatter = parts[1];
                        const body = parts.slice(2).join('---');
                        const meta = parseYAML(frontmatter);
                        const plainText = body.replace(/[#*_\-[\]()`]/g, '').substring(0, 150) + '...';
                        articleCards.push(`
                            <div class="article-card">
                                <div class="card-image">
                                    <img src="${meta.image || 'https://via.placeholder.com/280x200/e2e8f0/64748b?text=Article+Image'}" alt="${meta.title}" loading="lazy">
                                </div>
                                <div class="card-content">
                                    <div>
                                        <h3>${meta.title}</h3>
                                        <p>${plainText}</p>
                                    </div>
                                    <button class="read-more-btn" onclick="openDetail('${articleFiles[i]}', 'article')">Read More</button>
                                </div>
                            </div>
                        `);
                    }
                }

                const articlesContainer = document.getElementById('articles-container');
                if (articleCards.length) {
                    articlesContainer.innerHTML = articleCards.join('');
                } else {
                    articlesContainer.innerHTML = '<p style="text-align:center;color:#94a3b8;">No articles available at this time.</p>';
                }

                // Load team members
                const teamFiles = indexData.teams.slice(0, 3);
                const teamPromises = teamFiles.map(file =>
                    fetch(`/content/${file}`)
                        .then(r => {
                            if (!r.ok) throw new Error(`Failed to load team member: ${file}`);
                            return r.text();
                        })
                        .catch(err => {
                            console.error(`Error loading team member ${file}:`, err);
                            return null;
                        })
                );

                const teamTexts = await Promise.all(teamPromises);
                const validTeamTexts = teamTexts.filter(text => text !== null);
                const teamCards = [];
                for (let i = 0; i < validTeamTexts.length; i++) {
                    const text = validTeamTexts[i];
                    const parts = text.split('---');
                    if (parts.length >= 3) {
                        const frontmatter = parts[1];
                        const body = parts.slice(2).join('---');
                        const meta = parseYAML(frontmatter);
                        const excerpt = body.replace(/[#*_\-[\]()`]/g, '').substring(0, 100) + '...';
                        teamCards.push(`
                            <div class="card team-card">
                                <img src="${meta.image || 'https://via.placeholder.com/300x180/e2e8f0/64748b?text=Team+Member'}" alt="${meta.title}" loading="lazy">
                                <div class="card-content-team">
                                    <h3>${meta.title}</h3>
                                    <p><strong>${meta.role || 'Team Member'}</strong></p>
                                    <p>${excerpt}</p>
                                    <button onclick="openDetail('${teamFiles[i]}', 'team')">View Profile</button>
                                </div>
                            </div>
                        `);
                    }
                }

                const teamContainer = document.getElementById('team-container');
                if (teamCards.length) {
                    teamContainer.innerHTML = teamCards.join('');
                } else {
                    teamContainer.innerHTML = '<p style="text-align:center;color:#94a3b8;">No team members available at this time.</p>';
                }
            } catch (error) {
                console.error('Error loading index content:', error);
                document.getElementById('articles-container').innerHTML = '<p style="text-align:center;color:#ef4444;">Unable to load articles at this time.</p>';
                document.getElementById('team-container').innerHTML = '<p style="text-align:center;color:#ef4444;">Unable to load team information at this time.</p>';
            }
        }

        // Function to open detail pages
        function openDetail(id, type) {
            sessionStorage.setItem('selectedFile', id);
            if (type === 'article') {
                window.location.href = 'article.html';
            } else if (type === 'team') {
                window.location.href = 'team_detail.html';
            }
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', loadIndexContent);
    </script>
</body>
</html>