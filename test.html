<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BioNova - Sustainable Development NGO</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" type="image/png" href="/content/images/logo.png" />
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
</head>

<body>
    <header>
        <nav class="navbar">
            <div class="container">
                <a href="index.html" class="logo">BioNova</a>
                <ul class="nav-links">
                    <li><a href="about.html">About</a></li>
                    <li><a href="articles.html">Publications</a></li>
                    <li><a href="team.html">Team</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <!-- Hero -->
        <section class="hero" aria-labelledby="hero-heading">
            <div class="hero-content">
                <h1 id="hero-heading">Sustainable Solutions for Global Challenges</h1>
                <p>Empowering communities through innovative development programs and strategic partnerships</p>
                <button class="cta-button" onclick="window.location.href='contact.html'">Join Our Mission</button>
            </div>
        </section>

        <!-- About -->
        <section class="section" aria-labelledby="about-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="about-heading">Our Commitment to Sustainable Change</h2>
                    <p>Building resilient communities through evidence-based approaches and collaborative partnerships</p>
                </header>
                <div class="about-content">
                    <div class="about-text">
                        <p>BioNova is an international non-governmental organization dedicated to creating lasting, sustainable change in communities worldwide. Our evidence-based approach combines local knowledge with global expertise to address the most pressing challenges facing vulnerable populations.</p>
                        <p>Our mission focuses on empowering communities through capacity building, education, healthcare access, and economic development initiatives. We prioritize local leadership and participatory approaches to ensure our programs are culturally appropriate and sustainable in the long term.</p>
                        <p>Through strategic partnerships with local organizations, government agencies, and international stakeholders, we've successfully implemented programs that have transformed lives across multiple continents while maintaining the highest standards of accountability and transparency.</p>
                        <a href="#" class="learn-more-btn">Explore Our Impact <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="about-image fade-in">
                        <img src="/content/images/teamBio.jpeg" alt="BioNova team collaborating on community development project" loading="lazy" />
                    </div>
                </div>
            </div>
        </section>

        <!-- Articles -->
        <section class="section alt-bg" aria-labelledby="articles-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="articles-heading">Insights & Impact Stories</h2>
                    <p>Research findings, program updates, and stories of transformation from our global initiatives</p>
                </header>
                <div id="articles-container" class="articles-preview">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading articles...</p>
                    </div>
                </div>
                <div class="view-all-container">
                    <a href="articles.html" class="view-all-btn">View All Publications <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </section>

        <!-- Team -->
        <section class="section alt-bg" aria-labelledby="team-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="team-heading">Our Leadership & Experts</h2>
                    <p>Dedicated professionals driving sustainable change across our global operations</p>
                </header>
                <div id="team-container" class="team-preview">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading team...</p>
                    </div>
                </div>
                <div class="view-all-container">
                    <a href="team.html" class="view-all-btn">Meet Our Full Team <i class="fas fa-arrow-right"></i></a>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 BioNova. All rights reserved. Committed to transparency and accountability.</p>
        </div>
    </footer>

    <!-- Script -->
    <script>
        // Utility: Parse YAML-like frontmatter
        function parseYAML(yamlStr) {
            const result = {};
            const lines = yamlStr.trim().split('\n');
            for (const line of lines) {
                const [key, ...valueParts] = line.split(':');
                const trimmedKey = key.trim();
                let value = valueParts.join(':').trim();
                if (value.startsWith('"') && value.endsWith('"')) {
                    value = value.slice(1, -1);
                } else if (value.startsWith("'") && value.endsWith("'")) {
                    value = value.slice(1, -1);
                } else if (value.startsWith('[') && value.endsWith(']')) {
                    value = value
                        .slice(1, -1)
                        .split(',')
                        .map((v) => v.trim().replace(/["']/g, ''));
                }
                result[trimmedKey] = value;
            }
            return result;
        }

        // Markdown â†’ HTML (simple version)
        function simpleMarkdownToHTML(md) {
            let html = md;
            html = html.replace(/^(\s*)## (.+)$/gm, '$1<h2>$2</h2>');
            html = html.replace(/^(\s*)# (.+)$/gm, '$1<h1>$2</h1>');
            html = html.replace(/^(\s*)### (.+)$/gm, '$1<h3>$2</h3>');
            html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/\*(.+?)\*/g, '<em>$1</em>');
            html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
            html = html.replace(/^- (.+)$/gm, '<li>$1</li>');
            html = html.replace(/(<li>.+<\/li>)+/g, '<ul>$&</ul>');
            html = html.replace(/\n/g, '<br>');
            return html;
        }

        // Load homepage content
        async function loadIndexContent() {
            try {
                const indexResponse = await fetch('/content/index.json');
                if (!indexResponse.ok) throw new Error(`HTTP error ${indexResponse.status}`);
                const indexData = await indexResponse.json();

                // Articles
                const articleFiles = indexData.articles.slice(0, 3);
                const articlePromises = articleFiles.map(file =>
                    fetch(`/content/${file}`)
                        .then(r => (r.ok ? r.text() : null))
                        .catch(() => null)
                );
                const articleTexts = (await Promise.all(articlePromises)).filter(Boolean);
                const articleCards = articleTexts.map((text, i) => {
                    const parts = text.split('---');
                    if (parts.length < 3) return '';
                    const meta = parseYAML(parts[1]);
                    const body = parts.slice(2).join('---');
                    const plain = body.replace(/[#*_\-[\]()`]/g, '').substring(0, 150) + '...';
                    return `
                        <div class="article-card">
                            <div class="card-image">
                                <img src="${meta.image || 'https://via.placeholder.com/280x200/e2e8f0/64748b?text=Article+Image'}" alt="${meta.title}" loading="lazy">
                            </div>
                            <div class="card-content">
                                <div>
                                    <h3>${meta.title}</h3>
                                    <p>${plain}</p>
                                </div>
                                <button class="read-more-btn" onclick="openDetail('${articleFiles[i]}', 'article')">Read More</button>
                            </div>
                        </div>
                    `;
                }).join('');
                document.getElementById('articles-container').innerHTML = articleCards || '<p style="text-align:center;color:#94a3b8;">No articles available.</p>';

                // Team
                const teamFiles = indexData.teams.slice(0, 3);
                const teamPromises = teamFiles.map(file =>
                    fetch(`/content/${file}`)
                        .then(r => (r.ok ? r.text() : null))
                        .catch(() => null)
                );
                const teamTexts = (await Promise.all(teamPromises)).filter(Boolean);
                const teamCards = teamTexts.map((text, i) => {
                    const parts = text.split('---');
                    if (parts.length < 3) return '';
                    const meta = parseYAML(parts[1]);
                    const body = parts.slice(2).join('---');
                    const excerpt = body.replace(/[#*_\-[\]()`]/g, '').substring(0, 100) + '...';
                    return `
                        <div class="card team-card">
                            <img src="${meta.image || 'https://via.placeholder.com/300x180/e2e8f0/64748b?text=Team+Member'}" alt="${meta.title}" loading="lazy">
                            <div class="card-content-team">
                                <h3>${meta.title}</h3>
                                <p><strong>${meta.role || 'Team Member'}</strong></p>
                                <p>${excerpt}</p>
                                <button onclick="openDetail('${teamFiles[i]}', 'team')">View Profile</button>
                            </div>
                        </div>
                    `;
                }).join('');
                document.getElementById('team-container').innerHTML = teamCards || '<p style="text-align:center;color:#94a3b8;">No team members available.</p>';
            } catch (err) {
                console.error('Error loading content:', err);
                document.getElementById('articles-container').innerHTML = '<p style="text-align:center;color:#ef4444;">Unable to load articles.</p>';
                document.getElementById('team-container').innerHTML = '<p style="text-align:center;color:#ef4444;">Unable to load team info.</p>';
            }
        }

        // Open detail pages
        function openDetail(id, type) {
            sessionStorage.setItem('selectedFile', id);
            window.location.href = type === 'article' ? 'article.html' : 'team_detail.html';
        }

        document.addEventListener('DOMContentLoaded', loadIndexContent);
    </script>
</body>
</html>
