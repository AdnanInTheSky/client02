<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BioNova - Sustainable Development NGO</title>
    
    <!-- Bootstrap 5 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bs-primary: #000;
            --bs-secondary: #6c757d;
            --bs-light: #f8f9fa;
            --bs-dark: #212529;
        }
        
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }
        
        .navbar {
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            color: #000 !important;
        }
        
        .nav-link {
            color: #333 !important;
            font-weight: 500;
        }
        
        .nav-link:hover {
            color: #000 !important;
        }
        
        .hero {
            background-color: #f8f9fa;
            padding: 6rem 0;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
            color: #666;
        }
        
        .btn-primary {
            background-color: #000;
            border-color: #000;
            padding: 0.75rem 2rem;
            font-weight: 500;
        }
        
        .btn-primary:hover {
            background-color: #333;
            border-color: #333;
        }
        
        .btn-outline-primary {
            color: #000;
            border-color: #000;
        }
        
        .btn-outline-primary:hover {
            background-color: #000;
            color: #fff;
        }
        
        .section {
            padding: 5rem 0;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .section-header h2 {
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .section-header p {
            color: #666;
            max-width: 700px;
            margin: 0 auto;
        }
        
        .alt-bg {
            background-color: #f8f9fa;
        }
        
        .card {
            border: none;
            box-shadow: 0 4px 6px rgba(0,0,0,.1);
            transition: transform 0.3s ease;
            height: 100%;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-img-top {
            height: 200px;
            object-fit: cover;
        }
        
        .card-body {
            padding: 1.5rem;
        }
        
        .card-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
        }
        
        .team-card img {
            height: 250px;
            object-fit: cover;
        }
        
        footer {
            background-color: #000;
            color: #fff;
            padding: 2rem 0;
            text-align: center;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
        }
        
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #000;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Custom fade-in animation */
        .fade-in {
            opacity: 0;
            animation: fadeIn 1s ease forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <header>
        <nav class="navbar navbar-expand-lg navbar-light fixed-top">
            <div class="container">
                <a class="navbar-brand" href="index.html">BioNova</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="articles.html">Publications</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="team.html">Team</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contact.html">Contact</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <!-- Hero Section -->
        <section class="hero" aria-labelledby="hero-heading">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <h1 id="hero-heading" class="display-4 fw-bold mb-4">Sustainable Solutions for Global Challenges</h1>
                        <p class="lead mb-4">Empowering communities through innovative development programs and strategic partnerships</p>
                        <button class="btn btn-primary btn-lg" onclick="window.location.href='contact.html'">Join Our Mission</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="section" aria-labelledby="about-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="about-heading" class="display-5 fw-bold">Our Commitment to Sustainable Change</h2>
                    <p>Building resilient communities through evidence-based approaches and collaborative partnerships</p>
                </header>
                <div class="row align-items-center">
                    <div class="col-lg-6 mb-4 mb-lg-0">
                        <p class="mb-3">BioNova is an international non-governmental organization dedicated to creating lasting, sustainable change in communities worldwide. Our evidence-based approach combines local knowledge with global expertise to address the most pressing challenges facing vulnerable populations.</p>
                        <p class="mb-3">Our mission focuses on empowering communities through capacity building, education, healthcare access, and economic development initiatives. We prioritize local leadership and participatory approaches to ensure our programs are culturally appropriate and sustainable in the long term.</p>
                        <p class="mb-4">Through strategic partnerships with local organizations, government agencies, and international stakeholders, we've successfully implemented programs that have transformed lives across multiple continents while maintaining the highest standards of accountability and transparency.</p>
                        <a href="#" class="btn btn-outline-primary">Explore Our Impact <i class="fas fa-arrow-right ms-2"></i></a>
                    </div>
                    <div class="col-lg-6">
                        <div class="fade-in">
                            <img src="/content/images/teamBio.jpeg" alt="BioNova team collaborating on community development project" class="img-fluid rounded shadow" loading="lazy" />
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Articles Section -->
        <section class="section alt-bg" aria-labelledby="articles-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="articles-heading" class="display-5 fw-bold">Insights & Impact Stories</h2>
                    <p>Research findings, program updates, and stories of transformation from our global initiatives</p>
                </header>
                <div id="articles-container" class="row g-4">
                    <div class="col-12 text-center">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>Loading articles...</p>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-5">
                    <a href="articles.html" class="btn btn-outline-primary">View All Publications <i class="fas fa-arrow-right ms-2"></i></a>
                </div>
            </div>
        </section>

        <!-- Team Section -->
        <section class="section" aria-labelledby="team-heading">
            <div class="container">
                <header class="section-header">
                    <h2 id="team-heading" class="display-5 fw-bold">Our Leadership & Experts</h2>
                    <p>Dedicated professionals driving sustainable change across our global operations</p>
                </header>
                <div id="team-container" class="row g-4">
                    <div class="col-12 text-center">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>Loading team...</p>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-5">
                    <a href="team.html" class="btn btn-outline-primary">Meet Our Full Team <i class="fas fa-arrow-right ms-2"></i></a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 BioNova. All rights reserved. Committed to transparency and accountability.</p>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Script -->
    <script>
        // Utility: Parse YAML-like frontmatter
        function parseYAML(yamlStr) {
            const result = {};
            const lines = yamlStr.trim().split('\n');
            for (const line of lines) {
                const [key, ...valueParts] = line.split(':');
                const trimmedKey = key.trim();
                let value = valueParts.join(':').trim();
                if (value.startsWith('"') && value.endsWith('"')) {
                    value = value.slice(1, -1);
                } else if (value.startsWith("'") && value.endsWith("'")) {
                    value = value.slice(1, -1);
                } else if (value.startsWith('[') && value.endsWith(']')) {
                    value = value
                        .slice(1, -1)
                        .split(',')
                        .map((v) => v.trim().replace(/["']/g, ''));
                }
                result[trimmedKey] = value;
            }
            return result;
        }

        // Markdown â†’ HTML (simple version)
        function simpleMarkdownToHTML(md) {
            let html = md;
            html = html.replace(/^(\s*)## (.+)$/gm, '$1<h2>$2</h2>');
            html = html.replace(/^(\s*)# (.+)$/gm, '$1<h1>$2</h1>');
            html = html.replace(/^(\s*)### (.+)$/gm, '$1<h3>$2</h3>');
            html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            html = html.replace(/\*(.+?)\*/g, '<em>$1</em>');
            html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
            html = html.replace(/^- (.+)$/gm, '<li>$1</li>');
            html = html.replace(/(<li>.+<\/li>)+/g, '<ul>$&</ul>');
            html = html.replace(/\n/g, '<br>');
            return html;
        }

        // Load homepage content
        async function loadIndexContent() {
            try {
                const indexResponse = await fetch('/content/index.json');
                if (!indexResponse.ok) throw new Error(`HTTP error ${indexResponse.status}`);
                const indexData = await indexResponse.json();

                // Articles
                const articleFiles = indexData.articles.slice(0, 3);
                const articlePromises = articleFiles.map(file =>
                    fetch(`/content/${file}`)
                        .then(r => (r.ok ? r.text() : null))
                        .catch(() => null)
                );
                const articleTexts = (await Promise.all(articlePromises)).filter(Boolean);
                const articleCards = articleTexts.map((text, i) => {
                    const parts = text.split('---');
                    if (parts.length < 3) return '';
                    const meta = parseYAML(parts[1]);
                    const body = parts.slice(2).join('---');
                    const plain = body.replace(/[#*_\-[\]()`]/g, '').substring(0, 150) + '...';
                    return `
                        <div class="col-md-4">
                            <div class="card h-100">
                                <img src="${meta.image || 'https://via.placeholder.com/300x200/e2e8f0/64748b?text=Article+Image'}" class="card-img-top" alt="${meta.title}" loading="lazy">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">${meta.title}</h5>
                                    <p class="card-text flex-grow-1">${plain}</p>
                                    <button class="btn btn-outline-primary mt-auto" onclick="openDetail('${articleFiles[i]}', 'article')">Read More</button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                document.getElementById('articles-container').innerHTML = articleCards || '<div class="col-12 text-center"><p class="text-muted">No articles available.</p></div>';

                // Team
                const teamFiles = indexData.teams.slice(0, 3);
                const teamPromises = teamFiles.map(file =>
                    fetch(`/content/${file}`)
                        .then(r => (r.ok ? r.text() : null))
                        .catch(() => null)
                );
                const teamTexts = (await Promise.all(teamPromises)).filter(Boolean);
                const teamCards = teamTexts.map((text, i) => {
                    const parts = text.split('---');
                    if (parts.length < 3) return '';
                    const meta = parseYAML(parts[1]);
                    const body = parts.slice(2).join('---');
                    const excerpt = body.replace(/[#*_\-[\]()`]/g, '').substring(0, 100) + '...';
                    return `
                        <div class="col-md-4">
                            <div class="card team-card h-100">
                                <img src="${meta.image || 'https://via.placeholder.com/300x250/e2e8f0/64748b?text=Team+Member'}" class="card-img-top" alt="${meta.title}" loading="lazy">
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">${meta.title}</h5>
                                    <p class="card-text"><strong>${meta.role || 'Team Member'}</strong></p>
                                    <p class="card-text flex-grow-1">${excerpt}</p>
                                    <button class="btn btn-outline-primary mt-auto" onclick="openDetail('${teamFiles[i]}', 'team')">View Profile</button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                document.getElementById('team-container').innerHTML = teamCards || '<div class="col-12 text-center"><p class="text-muted">No team members available.</p></div>';
            } catch (err) {
                console.error('Error loading content:', err);
                document.getElementById('articles-container').innerHTML = '<div class="col-12 text-center"><p class="text-danger">Unable to load articles.</p></div>';
                document.getElementById('team-container').innerHTML = '<div class="col-12 text-center"><p class="text-danger">Unable to load team info.</p></div>';
            }
        }

        // Open detail pages
        function openDetail(id, type) {
            sessionStorage.setItem('selectedFile', id);
            window.location.href = type === 'article' ? 'article.html' : 'team_detail.html';
        }

        document.addEventListener('DOMContentLoaded', loadIndexContent);
    </script>
</body>
</html>